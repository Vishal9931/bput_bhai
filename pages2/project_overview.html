<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Overview - HO Safety Management</title>
    <link rel="stylesheet" href="../css2/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Additional CSS for enhanced styling */
        :root {
            --primary: #3b82f6;
            --primary-50: #eff6ff;
            --primary-100: #dbeafe;
            --primary-600: #2563eb;
            --primary-700: #1d4ed8;
            --success: #10b981;
            --success-100: #d1fae5;
            --success-600: #059669;
            --warning: #f59e0b;
            --warning-100: #fef3c7;
            --warning-600: #d97706;
            --error: #ef4444;
            --error-100: #fee2e2;
            --accent: #8b5cf6;
            --accent-100: #ede9fe;
            --accent-600: #7c3aed;
            --surface: #ffffff;
            --background: #f8fafc;
            --secondary-50: #f8fafc;
            --secondary-100: #f1f5f9;
            --secondary-200: #e2e8f0;
            --secondary-300: #cbd5e1;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--background);
            color: var(--text-primary);
        }

        .shadow-card {
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
        }

        .rounded-card {
            border-radius: 0.5rem;
        }

        .rounded-button {
            border-radius: 0.375rem;
        }

        .form-input {
            border: 1px solid var(--secondary-300);
            border-radius: 0.375rem;
            background-color: var(--surface);
            transition: all 0.2s;
        }

        .form-input:focus {
            outline: none;
            ring: 2px solid var(--primary-100);
            border-color: var(--primary);
        }

        .card-elevated {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        .status-indicator {
            width: 6px;
            height: 6px;
            border-radius: 50%;
        }

        .status-success {
            background-color: var(--success);
        }

        .status-warning {
            background-color: var(--warning);
        }

        .status-error {
            background-color: var(--error);
        }

        .status-accent {
            background-color: var(--accent);
        }

        .status-secondary {
            background-color: var(--secondary-300);
        }

        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: .5;
            }
        }

        /* Enhanced table styling */
        .data-table th {
            font-weight: 500;
            font-size: 0.75rem;
            letter-spacing: 0.05em;
            color: var(--text-secondary);
        }

        .data-table tbody tr {
            transition: background-color 0.2s;
        }

        .data-table tbody tr:hover {
            background-color: var(--secondary-50);
        }

        /* Enhanced pagination */
        .pagination-btn {
            padding: 0.5rem 0.75rem;
            font-size: 0.875rem;
            border: 1px solid var(--secondary-300);
            border-radius: 0.375rem;
            transition: all 0.2s;
        }

        .pagination-btn:hover:not(:disabled) {
            background-color: var(--secondary-50);
        }

        .pagination-btn.active {
            background-color: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* Chart improvements */
        .chart-container {
            position: relative;
            height: 16rem;
        }

        .compliance-chart {
            width: 8rem;
            height: 8rem;
        }

        /* Responsive improvements */
        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
            }
            
            .lg\:grid-cols-3 {
                grid-template-columns: 1fr;
            }
            
            .lg\:col-span-2 {
                grid-column: 1;
            }
            
            .flex-col {
                flex-direction: column;
            }
            
            .lg\:flex-row {
                flex-direction: column;
            }
            
            .lg\:items-center {
                align-items: flex-start;
            }
        }
    </style>
  
  <script type="module" src="https://static.rocket.new/rocket-web.js?_cfg=https%3A%2F%2Fhosafety1834back.builtwithrocket.new&_be=https%3A%2F%2Fapplication.rocket.new&_v=0.1.9"></script>
  <script type="module" src="https://static.rocket.new/rocket-shot.js?v=0.0.1"></script>
  </head>
<body class="bg-background font-inter">
    <!-- Navigation Header -->
    <nav class="bg-surface shadow-card border-b border-secondary-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo and Brand -->
                <div class="flex items-center space-x-4">
                    <div class="flex-shrink-0">
                        <svg class="h-8 w-8 text-primary" viewBox="0 0 32 32" fill="currentColor">
                            <path d="M16 2L3 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-13-5z"/>
                            <path d="M14 16l-2-2-1.41 1.41L14 18.83l6-6L18.59 11.41 14 16z" fill="white"/>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-xl font-semibold text-text-primary">HO Safety Management</h1>
                        <p class="text-sm text-text-secondary">Project Overview</p>
                    </div>
                </div>

                <!-- Navigation Links -->
                <div class="hidden md:flex items-center space-x-6">
                    <a href="dashboard_overview.html" class="text-text-secondary hover:text-primary transition-colors">Dashboard</a>
                    <a href="sector_view.html" class="text-text-secondary hover:text-primary transition-colors">Sectors</a>
                    <a href="project_overview.html" class="text-primary font-medium border-b-2 border-primary pb-1">Projects</a>
                    <a href="site_safety_officer_detail.html" class="text-text-secondary hover:text-primary transition-colors">Officers</a>
                    <a href="comparison_analysis.html" class="text-text-secondary hover:text-primary transition-colors">Analysis</a>
                    <a href="settings_access_control.html" class="text-text-secondary hover:text-primary transition-colors">Settings</a>
                </div>

                <!-- User Profile -->
                <div class="flex items-center space-x-4">
                    <button class="relative p-2 text-text-secondary hover:text-primary transition-colors">
                        <i class="fas fa-bell text-lg"></i>
                        <span class="absolute -top-1 -right-1 h-4 w-4 bg-error text-white text-xs rounded-full flex items-center justify-center">3</span>
                    </button>
                    <div class="flex items-center space-x-2">
                        <img src="https://images.unsplash.com/photo-1599182002081-60947de0356b" 
                             alt="Profile picture of Arjun Sharma, Head Office Manager" 
                             class="h-8 w-8 rounded-full object-cover"
                             onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;">
                        <span class="text-sm font-medium text-text-primary">Arjun Sharma</span>
                    </div>
                </div>

                <!-- Mobile Menu Button -->
                <div class="md:hidden">
                    <button id="mobile-menu-button" class="text-text-secondary hover:text-primary">
                        <i class="fas fa-bars text-lg"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden bg-surface border-t border-secondary-200">
            <div class="px-4 py-2 space-y-2">
                <a href="dashboard_overview.html" class="block px-3 py-2 text-text-secondary hover:bg-secondary-50 rounded">Dashboard</a>
                <a href="sector_view.html" class="block px-3 py-2 text-text-secondary hover:bg-secondary-50 rounded">Sectors</a>
                <a href="project_overview.html" class="block px-3 py-2 text-primary font-medium bg-primary-50 rounded">Projects</a>
                <a href="site_safety_officer_detail.html" class="block px-3 py-2 text-text-secondary hover:bg-secondary-50 rounded">Officers</a>
                <a href="comparison_analysis.html" class="block px-3 py-2 text-text-secondary hover:bg-secondary-50 rounded">Analysis</a>
                <a href="settings_access_control.html" class="block px-3 py-2 text-text-secondary hover:bg-secondary-50 rounded">Settings</a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
        <!-- Breadcrumb Navigation -->
        <nav class="flex items-center space-x-2 text-sm text-text-secondary mb-6">
            <a href="dashboard_overview.html" class="hover:text-primary transition-colors">Dashboard</a>
            <i class="fas fa-chevron-right text-xs"></i>
            <a href="sector_view.html" class="hover:text-primary transition-colors" id="sector-breadcrumb">Construction Sector</a>
            <i class="fas fa-chevron-right text-xs"></i>
            <span class="text-text-primary font-medium" id="project-breadcrumb">Mumbai Metro Bridge Project</span>
        </nav>

        <!-- Project Header Section -->
        <div class="bg-surface rounded-card shadow-card p-6 mb-6">
            <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6">
                <!-- Project Information -->
                <div class="flex-1">
                    <div class="flex items-center space-x-4 mb-4">
                        <div class="w-16 h-16 bg-primary-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-bridge text-primary text-2xl"></i>
                        </div>
                        <div>
                            <h2 class="text-2xl font-bold text-text-primary" id="project-title">Mumbai Metro Bridge Project</h2>
                            <p class="text-text-secondary" id="project-location">Bandra-Kurla Construction Zone, Mumbai</p>
                            <div class="flex items-center mt-2 space-x-4">
                                <div class="flex items-center space-x-2">
                                    <i class="fas fa-user text-text-secondary text-sm"></i>
                                    <span class="text-sm text-text-secondary">Project Head: <span id="project-head">Rajesh Kumar</span></span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <div class="status-indicator status-success" id="project-status-indicator"></div>
                                    <span class="text-sm font-medium text-success" id="project-status">Active</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Project Stats -->
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-text-primary" id="safety-score">94.2%</div>
                            <div class="text-sm text-text-secondary">Safety Score</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-text-primary" id="officers-count">8</div>
                            <div class="text-sm text-text-secondary">Officers</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-text-primary" id="days-active">247</div>
                            <div class="text-sm text-text-secondary">Days Active</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-text-primary" id="open-issues">2</div>
                            <div class="text-sm text-text-secondary">Open Issues</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Last Updated Info -->
            <div class="flex items-center justify-between mt-6 pt-4 border-t border-secondary-200">
                <div class="flex items-center text-sm text-text-secondary">
                    <i class="fas fa-clock mr-2"></i>
                    <span id="last-updated">Last updated: November 1, 2025 at 2:51 PM</span>
                    <div class="ml-4 flex items-center">
                        <div class="w-2 h-2 bg-success rounded-full animate-pulse mr-2"></div>
                        <span>Live</span>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <select class="form-input text-sm px-3 py-1 min-w-32" id="time-range">
                        <option>Last 7 days</option>
                        <option>Last 30 days</option>
                        <option>Last 90 days</option>
                        <option>Custom range</option>
                    </select>
                    <button class="p-2 text-text-secondary hover:text-primary transition-colors" id="refresh-data">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Metrics Dashboard -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
            <!-- Safety Trends Chart -->
            <div class="lg:col-span-2 card-elevated bg-surface p-6">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4">
                    <div>
                        <h3 class="text-lg font-semibold text-text-primary">Safety Trends</h3>
                        <p class="text-sm text-text-secondary mt-1">Daily, weekly, and monthly tracking</p>
                    </div>
                    <div class="flex items-center space-x-2">
                        <button id="trend-daily" class="px-3 py-1 text-sm bg-primary text-white rounded transition-colors">
                            Daily
                        </button>
                        <button id="trend-weekly" class="px-3 py-1 text-sm bg-secondary-200 text-text-secondary rounded hover:bg-secondary-300 transition-colors">
                            Weekly
                        </button>
                        <button id="trend-monthly" class="px-3 py-1 text-sm bg-secondary-200 text-text-secondary rounded hover:bg-secondary-300 transition-colors">
                            Monthly
                        </button>
                    </div>
                </div>

                <!-- Chart Container -->
                <div class="h-64 flex items-center justify-center bg-secondary-50 rounded-lg" id="safety-trend-chart">
                    <!-- Chart will be dynamically generated -->
                </div>

                <!-- Chart Legend -->
                <div class="flex items-center justify-center gap-6 mt-4 pt-4 border-t border-secondary-200">
                    <div class="flex items-center space-x-2">
                        <div class="w-3 h-3 bg-success rounded"></div>
                        <span class="text-sm text-text-secondary">Safety Score</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <div class="w-3 h-1 bg-error rounded"></div>
                        <span class="text-sm text-text-secondary">Incidents</span>
                    </div>
                </div>
            </div>

            <!-- Key Metrics -->
            <div class="space-y-6">
                <!-- Unsafe Acts vs Safe Observations -->
                <div class="card-elevated bg-surface p-6">
                    <h3 class="text-lg font-semibold text-text-primary mb-4">Safety Observations</h3>
                    <div class="space-y-4">
                        <div>
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-sm text-text-secondary">Safe Observations</span>
                                <span class="text-sm font-semibold text-success" id="safe-observations">892 (89.2%)</span>
                            </div>
                            <div class="w-full bg-secondary-200 rounded-full h-2">
                                <div class="bg-success h-2 rounded-full" id="safe-observations-bar" style="width: 89.2%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-sm text-text-secondary">Unsafe Acts</span>
                                <span class="text-sm font-semibold text-error" id="unsafe-acts">108 (10.8%)</span>
                            </div>
                            <div class="w-full bg-secondary-200 rounded-full h-2">
                                <div class="bg-error h-2 rounded-full" id="unsafe-acts-bar" style="width: 10.8%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="mt-4 pt-4 border-t border-secondary-200">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-text-primary" id="total-observations">1,000</div>
                            <div class="text-sm text-text-secondary">Total Observations</div>
                        </div>
                    </div>
                </div>

                <!-- Compliance Percentage -->
                <div class="card-elevated bg-surface p-6">
                    <h3 class="text-lg font-semibold text-text-primary mb-4">Compliance Rate</h3>
                    <div class="relative w-32 h-32 mx-auto">
                        <svg class="compliance-chart transform -rotate-90" viewBox="0 0 120 120" id="compliance-chart">
                            <circle cx="60" cy="60" r="50" stroke="#E2E8F0" stroke-width="8" fill="none"/>
                            <circle cx="60" cy="60" r="50" stroke="#10B981" stroke-width="8" fill="none" 
                                    stroke-dasharray="296" stroke-dashoffset="17.6" stroke-linecap="round" id="compliance-ring"/>
                        </svg>
                        <div class="absolute inset-0 flex items-center justify-center">
                            <div class="text-center">
                                <div class="text-2xl font-bold text-success" id="compliance-rate">94.2%</div>
                                <div class="text-xs text-text-secondary">Compliant</div>
                            </div>
                        </div>
                    </div>
                    <div class="mt-4 text-center">
                        <div class="flex items-center justify-center text-success text-sm">
                            <i class="fas fa-arrow-up mr-1"></i>
                            <span id="compliance-trend">+2.1% from last week</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Site Safety Officers Management -->
        <div class="card-elevated bg-surface p-6">
            <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4">
                <div>
                    <h3 class="text-lg font-semibold text-text-primary">Site Safety Officers</h3>
                    <p class="text-sm text-text-secondary mt-1">Assigned officers and performance tracking</p>
                </div>
                <div class="flex items-center space-x-3">
                    <div class="flex items-center space-x-2">
                        <i class="fas fa-filter text-text-secondary"></i>
                        <select class="form-input text-sm px-3 py-1 min-w-32" id="officer-filter">
                            <option>All Officers</option>
                            <option>High Performers</option>
                            <option>Need Attention</option>
                            <option>Recent Reports</option>
                        </select>
                    </div>
                    <button class="flex items-center px-4 py-2 bg-primary text-white rounded-button hover:bg-primary-700 transition-colors" id="compare-officers">
                        <i class="fas fa-chart-bar mr-2"></i>
                        Compare Officers
                    </button>
                </div>
            </div>

            <!-- Officers Table -->
            <div class="overflow-x-auto">
                <table class="w-full data-table">
                    <thead>
                        <tr class="border-b border-secondary-200">
                            <th class="text-left py-3 px-4 font-semibold text-text-primary">Officer</th>
                            <th class="text-left py-3 px-4 font-semibold text-text-primary">ID</th>
                            <th class="text-left py-3 px-4 font-semibold text-text-primary">Contact</th>
                            <th class="text-left py-3 px-4 font-semibold text-text-primary">Assigned Site</th>
                            <th class="text-left py-3 px-4 font-semibold text-text-primary">Last Report</th>
                            <th class="text-left py-3 px-4 font-semibold text-text-primary">Compliance</th>
                        </tr>
                    </thead>
                    <tbody id="officers-table-body">
                        <!-- Officers will be dynamically populated -->
                    </tbody>
                </table>
            </div>

            <!-- Table Footer -->
            <div class="flex flex-col sm:flex-row justify-between items-center mt-6 pt-4 border-t border-secondary-200 gap-4">
                <div class="text-sm text-text-secondary">
                    Showing <span id="officers-showing">1-5</span> of <span id="total-officers">8</span> officers
                </div>
                <div class="flex items-center space-x-2">
                    <button id="officers-prev" class="pagination-btn disabled:opacity-50" disabled>
                        Previous
                    </button>
                    <button id="officers-page-1" class="pagination-btn active">
                        1
                    </button>
                    <button id="officers-page-2" class="pagination-btn">
                        2
                    </button>
                    <button id="officers-next" class="pagination-btn">
                        Next
                    </button>
                </div>
            </div>
        </div>

        <!-- Quick Actions Panel -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-8">
            <!-- Recent Activity -->
            <div class="card-elevated bg-surface p-6">
                <h3 class="text-lg font-semibold text-text-primary mb-4">Recent Activity</h3>
                <div class="space-y-3" id="recent-activity">
                    <!-- Recent activity will be dynamically populated -->
                </div>
            </div>

            <!-- Quick Stats -->
            <div class="card-elevated bg-surface p-6">
                <h3 class="text-lg font-semibold text-text-primary mb-4">Quick Stats</h3>
                <div class="space-y-4" id="quick-stats">
                    <!-- Quick stats will be dynamically populated -->
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="card-elevated bg-surface p-6">
                <h3 class="text-lg font-semibold text-text-primary mb-4">Quick Actions</h3>
                <div class="space-y-3">
                    <button id="add-officer-btn" class="w-full flex items-center justify-center px-4 py-2 bg-primary text-white rounded-button hover:bg-primary-700 transition-colors">
                        <i class="fas fa-plus mr-2"></i>
                        Add New Officer
                    </button>
                    <button id="schedule-inspection-btn" class="w-full flex items-center justify-center px-4 py-2 bg-accent text-white rounded-button hover:bg-accent-600 transition-colors">
                        <i class="fas fa-calendar mr-2"></i>
                        Schedule Inspection
                    </button>
                    <button id="download-reports-btn" class="w-full flex items-center justify-center px-4 py-2 bg-success text-white rounded-button hover:bg-success-600 transition-colors">
                        <i class="fas fa-download mr-2"></i>
                        Download Reports
                    </button>
                    <button id="project-settings-btn" class="w-full flex items-center justify-center px-4 py-2 bg-secondary-200 text-text-primary rounded-button hover:bg-secondary-300 transition-colors">
                        <i class="fas fa-cog mr-2"></i>
                        Project Settings
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- JavaScript for Interactivity -->
    <script>
        // Sample officer data for different projects
        const officerData = {
            1: [
                {
                    name: "Neha Sharma",
                    role: "Senior Safety Officer",
                    id: "SO-001",
                    phone: "+91 98765 43210",
                    email: "neha.sharma@company.in",
                    site: "Bridge Foundation - Zone A",
                    lastReport: "2 hours ago",
                    compliance: 96.8,
                    image: "https://images.unsplash.com/photo-1666104863534-49699d287018"
                },
                {
                    name: "Amit Verma",
                    role: "Safety Officer",
                    id: "SO-002",
                    phone: "+91 87654 32109",
                    email: "amit.verma@company.in",
                    site: "Bridge Foundation - Zone B",
                    lastReport: "4 hours ago",
                    compliance: 94.1,
                    image: "https://images.unsplash.com/photo-1621313212189-0e4447e1e25b"
                },
                {
                    name: "Kavya Reddy",
                    role: "Safety Officer",
                    id: "SO-003",
                    phone: "+91 76543 21098",
                    email: "kavya.reddy@company.in",
                    site: "Superstructure - East Side",
                    lastReport: "1 day ago",
                    compliance: 87.3,
                    image: "https://images.unsplash.com/photo-1666104863534-49699d287018"
                },
                {
                    name: "Rohit Joshi",
                    role: "Junior Safety Officer",
                    id: "SO-004",
                    phone: "+91 65432 10987",
                    email: "rohit.joshi@company.in",
                    site: "Superstructure - West Side",
                    lastReport: "6 hours ago",
                    compliance: 92.7,
                    image: "https://images.unsplash.com/photo-1621313212189-0e4447e1e25b"
                },
                {
                    name: "Ananya Gupta",
                    role: "Safety Officer",
                    id: "SO-005",
                    phone: "+91 54321 09876",
                    email: "ananya.gupta@company.in",
                    site: "Access Roads - North",
                    lastReport: "3 hours ago",
                    compliance: 95.4,
                    image: "https://images.unsplash.com/photo-1668049221607-1f2df20621cc"
                }
            ],
            2: [
                {
                    name: "Rahul Mehta",
                    role: "Senior Safety Officer",
                    id: "SO-006",
                    phone: "+91 98765 43211",
                    email: "rahul.mehta@company.in",
                    site: "Main Building - Zone A",
                    lastReport: "1 hour ago",
                    compliance: 95.2,
                    image: "https://images.unsplash.com/photo-1621313212189-0e4447e1e25b"
                },
                {
                    name: "Priya Singh",
                    role: "Safety Officer",
                    id: "SO-007",
                    phone: "+91 87654 32110",
                    email: "priya.singh@company.in",
                    site: "Main Building - Zone B",
                    lastReport: "5 hours ago",
                    compliance: 93.8,
                    image: "https://images.unsplash.com/photo-1666104863534-49699d287018"
                }
            ]
            // Add more projects as needed
        };

        // Function to load project data from sessionStorage
        function loadProjectData() {
            // Get project ID from URL parameters
            const urlParams = new URLSearchParams(window.location.search);
            const projectId = urlParams.get('id');
            
            // Get project data from sessionStorage
            const projectData = JSON.parse(sessionStorage.getItem('selectedProject'));
            
            if (projectData && projectData.id == projectId) {
                // Populate the project overview page with the data
                document.getElementById('project-title').textContent = projectData.name;
                document.getElementById('project-breadcrumb').textContent = projectData.name;
                document.getElementById('project-location').textContent = `${projectData.area}, ${projectData.location}`;
                document.getElementById('project-head').textContent = projectData.head;
                
                // Update status
                const statusIndicator = document.getElementById('project-status-indicator');
                const statusText = document.getElementById('project-status');
                
                if (projectData.status === 'active') {
                    statusIndicator.className = 'status-indicator status-success';
                    statusText.textContent = 'Active';
                    statusText.className = 'text-sm font-medium text-success';
                } else if (projectData.status === 'on-hold') {
                    statusIndicator.className = 'status-indicator status-warning';
                    statusText.textContent = 'On Hold';
                    statusText.className = 'text-sm font-medium text-warning';
                } else if (projectData.status === 'completed') {
                    statusIndicator.className = 'status-indicator status-accent';
                    statusText.textContent = 'Completed';
                    statusText.className = 'text-sm font-medium text-accent';
                } else {
                    statusIndicator.className = 'status-indicator status-secondary';
                    statusText.textContent = 'Planning';
                    statusText.className = 'text-sm font-medium text-secondary';
                }
                
                // Update stats
                document.getElementById('safety-score').textContent = `${projectData.safetyScore}%`;
                document.getElementById('officers-count').textContent = projectData.officers;
                document.getElementById('days-active').textContent = projectData.daysActive;
                document.getElementById('open-issues').textContent = projectData.openIssues;
                
                // Update safety observations
                document.getElementById('safe-observations').textContent = `${projectData.safeObservations} (${(projectData.safeObservations / projectData.totalObservations * 100).toFixed(1)}%)`;
                document.getElementById('unsafe-acts').textContent = `${projectData.unsafeActs} (${(projectData.unsafeActs / projectData.totalObservations * 100).toFixed(1)}%)`;
                document.getElementById('safe-observations-bar').style.width = `${(projectData.safeObservations / projectData.totalObservations * 100)}%`;
                document.getElementById('unsafe-acts-bar').style.width = `${(projectData.unsafeActs / projectData.totalObservations * 100)}%`;
                document.getElementById('total-observations').textContent = projectData.totalObservations.toLocaleString();
                
                // Update compliance rate
                document.getElementById('compliance-rate').textContent = `${projectData.complianceRate}%`;
                const complianceOffset = 296 - (projectData.complianceRate / 100 * 296);
                document.getElementById('compliance-ring').setAttribute('stroke-dashoffset', complianceOffset);
                
                // Generate safety trend chart
                generateSafetyTrendChart(projectData.trendData);
                
                // Load officers for this project
                loadOfficers(projectId);
                
                // Load recent activity
                loadRecentActivity(projectData.name);
                
                // Load quick stats
                loadQuickStats(projectData);
                
                console.log('Project data loaded successfully:', projectData.name);
            } else {
                console.error('Project data not found or ID mismatch');
                // Fallback to default data or show error message
            }
        }

        // Function to generate safety trend chart
        function generateSafetyTrendChart(trendData) {
            const chartContainer = document.getElementById('safety-trend-chart');
            chartContainer.innerHTML = '';
            
            const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
            svg.setAttribute('class', 'w-full h-full');
            svg.setAttribute('viewBox', '0 0 600 250');
            
            // Define gradients
            const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');
            
            const safetyGrad = document.createElementNS('http://www.w3.org/2000/svg', 'linearGradient');
            safetyGrad.setAttribute('id', 'safetyGrad');
            safetyGrad.setAttribute('x1', '0%');
            safetyGrad.setAttribute('y1', '0%');
            safetyGrad.setAttribute('x2', '0%');
            safetyGrad.setAttribute('y2', '100%');
            
            const stop1 = document.createElementNS('http://www.w3.org/2000/svg', 'stop');
            stop1.setAttribute('offset', '0%');
            stop1.setAttribute('style', 'stop-color:#10B981;stop-opacity:0.3');
            
            const stop2 = document.createElementNS('http://www.w3.org/2000/svg', 'stop');
            stop2.setAttribute('offset', '100%');
            stop2.setAttribute('style', 'stop-color:#10B981;stop-opacity:0.1');
            
            safetyGrad.appendChild(stop1);
            safetyGrad.appendChild(stop2);
            defs.appendChild(safetyGrad);
            
            svg.appendChild(defs);
            
            // Grid Lines
            for (let i = 0; i <= 4; i++) {
                const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                line.setAttribute('x1', '60');
                line.setAttribute('y1', 40 + i * 40);
                line.setAttribute('x2', '560');
                line.setAttribute('y2', 40 + i * 40);
                line.setAttribute('stroke', '#E2E8F0');
                line.setAttribute('stroke-width', '1');
                svg.appendChild(line);
            }
            
            // Y-axis labels
            const yLabels = [100, 80, 60, 40, 20];
            for (let i = 0; i < yLabels.length; i++) {
                const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                text.setAttribute('x', '55');
                text.setAttribute('y', 45 + i * 40);
                text.setAttribute('fill', '#64748B');
                text.setAttribute('font-size', '10');
                text.setAttribute('text-anchor', 'end');
                text.textContent = yLabels[i];
                svg.appendChild(text);
            }
            
            // Safety Score Line
            const points = trendData.map((score, index) => {
                const x = 60 + index * 60;
                const y = 200 - (score * 1.6); // Scale to fit chart
                return `${x},${y}`;
            }).join(' ');
            
            const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            path.setAttribute('d', `M${points}`);
            path.setAttribute('stroke', '#10B981');
            path.setAttribute('stroke-width', '3');
            path.setAttribute('fill', 'none');
            svg.appendChild(path);
            
            // Area under the curve
            const areaPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            areaPath.setAttribute('d', `M${points} L560,200 L60,200 Z`);
            areaPath.setAttribute('fill', 'url(#safetyGrad)');
            svg.appendChild(areaPath);
            
            // Data Points
            trendData.forEach((score, index) => {
                const x = 60 + index * 60;
                const y = 200 - (score * 1.6);
                
                const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                circle.setAttribute('cx', x);
                circle.setAttribute('cy', y);
                circle.setAttribute('r', '3');
                circle.setAttribute('fill', '#10B981');
                svg.appendChild(circle);
            });
            
            // X-axis labels
            const dates = ['Oct 24', 'Oct 25', 'Oct 26', 'Oct 27', 'Oct 28', 'Oct 29', 'Oct 30', 'Oct 31', 'Nov 1'];
            dates.forEach((date, index) => {
                const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                text.setAttribute('x', 60 + index * 60);
                text.setAttribute('y', '225');
                text.setAttribute('fill', '#64748B');
                text.setAttribute('font-size', '10');
                text.setAttribute('text-anchor', 'middle');
                text.textContent = date;
                svg.appendChild(text);
            });
            
            chartContainer.appendChild(svg);
        }

        // Function to load officers for the project
        function loadOfficers(projectId) {
            const officers = officerData[projectId] || officerData[1]; // Fallback to project 1 if not found
            const tableBody = document.getElementById('officers-table-body');
            tableBody.innerHTML = '';
            
            officers.forEach(officer => {
                const row = document.createElement('tr');
                row.className = 'border-b border-secondary-100 hover:bg-secondary-50 transition-colors';
                row.innerHTML = `
                    <td class="py-4 px-4">
                        <div class="flex items-center space-x-3">
                            <img src="${officer.image}" 
                                 alt="Profile picture of ${officer.name}, Safety Officer" 
                                 class="h-10 w-10 rounded-full object-cover"
                                 onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;">
                            <div>
                                <div class="font-medium text-text-primary">${officer.name}</div>
                                <div class="text-sm text-text-secondary">${officer.role}</div>
                            </div>
                        </div>
                    </td>
                    <td class="py-4 px-4 text-sm text-text-secondary">${officer.id}</td>
                    <td class="py-4 px-4">
                        <div class="text-sm text-text-primary">${officer.phone}</div>
                        <div class="text-sm text-text-secondary">${officer.email}</div>
                    </td>
                    <td class="py-4 px-4 text-sm text-text-primary">${officer.site}</td>
                    <td class="py-4 px-4 text-sm text-text-secondary">${officer.lastReport}</td>
                    <td class="py-4 px-4">
                        <div class="flex items-center space-x-2">
                            <span class="text-sm font-semibold ${officer.compliance >= 90 ? 'text-success' : officer.compliance >= 80 ? 'text-warning' : 'text-error'}">${officer.compliance}%</span>
                            <div class="status-indicator ${officer.compliance >= 90 ? 'status-success' : officer.compliance >= 80 ? 'status-warning' : 'status-error'}"></div>
                        </div>
                    </td>
                `;
                tableBody.appendChild(row);
            });
            
            // Update officers count
            document.getElementById('total-officers').textContent = officers.length;
            document.getElementById('officers-showing').textContent = `1-${Math.min(officers.length, 5)}`;
        }

        // Function to load recent activity
        function loadRecentActivity(projectName) {
            const activities = [
                {
                    icon: 'fa-check',
                    iconColor: 'success',
                    title: 'Safety inspection completed',
                    details: `Zone A - Neha Sharma • 2 hours ago`
                },
                {
                    icon: 'fa-exclamation-triangle',
                    iconColor: 'warning',
                    title: 'Minor safety violation reported',
                    details: `Zone B - Amit Verma • 4 hours ago`
                },
                {
                    icon: 'fa-file-alt',
                    iconColor: 'accent',
                    title: 'Daily report submitted',
                    details: `East Side - Kavya Reddy • 6 hours ago`
                }
            ];
            
            const activityContainer = document.getElementById('recent-activity');
            activityContainer.innerHTML = '';
            
            activities.forEach(activity => {
                const activityEl = document.createElement('div');
                activityEl.className = 'flex items-start space-x-3';
                activityEl.innerHTML = `
                    <div class="w-8 h-8 bg-${activity.iconColor}-100 rounded-full flex items-center justify-center flex-shrink-0">
                        <i class="fas ${activity.icon} text-${activity.iconColor} text-sm"></i>
                    </div>
                    <div class="flex-1 min-w-0">
                        <p class="text-sm font-medium text-text-primary">${activity.title}</p>
                        <p class="text-xs text-text-secondary">${activity.details}</p>
                    </div>
                `;
                activityContainer.appendChild(activityEl);
            });
        }

        // Function to load quick stats
        function loadQuickStats(projectData) {
            const stats = [
                { label: 'Reports Today', value: projectData.reportsToday, color: 'text-text-primary' },
                { label: 'Open Issues', value: projectData.openIssues, color: 'text-warning' },
                { label: 'Resolved Issues', value: Math.floor(projectData.totalObservations / 50), color: 'text-success' },
                { label: 'Active Officers', value: projectData.officers, color: 'text-text-primary' }
            ];
            
            const statsContainer = document.getElementById('quick-stats');
            statsContainer.innerHTML = '';
            
            stats.forEach(stat => {
                const statEl = document.createElement('div');
                statEl.className = 'flex justify-between items-center';
                statEl.innerHTML = `
                    <span class="text-sm text-text-secondary">${stat.label}</span>
                    <span class="text-lg font-semibold ${stat.color}">${stat.value}</span>
                `;
                statsContainer.appendChild(statEl);
            });
        }

        // Mobile menu toggle
        document.getElementById('mobile-menu-button').addEventListener('click', function() {
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenu.classList.toggle('hidden');
        });

        // Trend chart toggle functionality
        const trendButtons = document.querySelectorAll('[id^="trend-"]');
        trendButtons.forEach(button => {
            button.addEventListener('click', function() {
                trendButtons.forEach(btn => {
                    btn.classList.remove('bg-primary', 'text-white');
                    btn.classList.add('bg-secondary-200', 'text-text-secondary');
                });
                
                this.classList.remove('bg-secondary-200', 'text-text-secondary');
                this.classList.add('bg-primary', 'text-white');
                
                console.log('Trend period changed to:', this.id.replace('trend-', ''));
            });
        });

        // Quick Action buttons
        document.getElementById('add-officer-btn').addEventListener('click', function() {
            console.log('Adding new officer...');
            alert('Add New Officer functionality activated');
        });

        document.getElementById('schedule-inspection-btn').addEventListener('click', function() {
            console.log('Scheduling inspection...');
            alert('Schedule Inspection functionality activated');
        });

        document.getElementById('download-reports-btn').addEventListener('click', function() {
            console.log('Downloading reports...');
            alert('Download Reports functionality activated');
        });

        document.getElementById('project-settings-btn').addEventListener('click', function() {
            console.log('Opening project settings...');
            alert('Project Settings functionality activated');
        });

        document.getElementById('compare-officers').addEventListener('click', function() {
            console.log('Comparing officers...');
            alert('Compare Officers functionality activated');
        });

        // Officers pagination functionality
        let currentOfficersPage = 1;
        const totalOfficersPages = 2;

        function updateOfficersPagination() {
            document.getElementById('officers-prev').disabled = currentOfficersPage === 1;
            document.getElementById('officers-next').disabled = currentOfficersPage === totalOfficersPages;
            
            document.querySelectorAll('[id^="officers-page-"]').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById(`officers-page-${currentOfficersPage}`).classList.add('active');
            
            // Update showing count
            const start = (currentOfficersPage - 1) * 5 + 1;
            const end = Math.min(currentOfficersPage * 5, 8);
            document.getElementById('officers-showing').textContent = `${start}-${end}`;
        }

        document.getElementById('officers-prev').addEventListener('click', function() {
            if (currentOfficersPage > 1) {
                currentOfficersPage--;
                updateOfficersPagination();
                console.log('Officers previous page:', currentOfficersPage);
            }
        });

        document.getElementById('officers-next').addEventListener('click', function() {
            if (currentOfficersPage < totalOfficersPages) {
                currentOfficersPage++;
                updateOfficersPagination();
                console.log('Officers next page:', currentOfficersPage);
            }
        });

        document.getElementById('officers-page-1').addEventListener('click', function() {
            currentOfficersPage = 1;
            updateOfficersPagination();
        });

        document.getElementById('officers-page-2').addEventListener('click', function() {
            currentOfficersPage = 2;
            updateOfficersPagination();
        });

        // Auto-refresh data every 30 seconds
        function updateTimestamp() {
            const timestamp = document.getElementById('last-updated');
            if (timestamp) {
                const now = new Date();
                const timeString = now.toLocaleString('en-US', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    hour: 'numeric',
                    minute: '2-digit',
                    hour12: true
                });
                timestamp.textContent = `Last updated: ${timeString}`;
            }
        }

        // Initialize timestamp and set interval
        updateTimestamp();
        setInterval(updateTimestamp, 30000);

        // Table row hover effects and click handlers
        document.querySelectorAll('tbody tr').forEach(row => {
            row.addEventListener('click', function(e) {
                if (!e.target.closest('button')) {
                    window.location.href = 'site_safety_officer_detail.html';
                }
            });
        });

        // Filter functionality
        document.getElementById('officer-filter').addEventListener('change', function() {
            console.log('Filter applied:', this.value);
        });

        // Time range selector
        document.getElementById('time-range').addEventListener('change', function() {
            console.log('Time range changed to:', this.value);
        });

        // Refresh data button
        document.getElementById('refresh-data').addEventListener('click', function() {
            console.log('Refreshing project data...');
            // In a real application, this would fetch fresh data from the server
            updateTimestamp();
        });

        // Initialize the page with project data
        document.addEventListener('DOMContentLoaded', function() {
            loadProjectData();
            updateOfficersPagination();
        });
    </script>
<script id="dhws-dataInjector" src="../public/dhws-data-injector.js"></script>
</body>
</html>